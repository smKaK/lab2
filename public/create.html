<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="./kit/css/uikit.min.css" />
    <script src="./kit/js/uikit.min.js"></script>
    <script src="./kit/js/uikit-icons.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div class="uk-flex uk-flex-center">
      <div>
        <main class="uk-padding-large">
          <section
            class="uk-width-1-1 uk-grid-margin uk-first-column"
            style="width: 500px"
          >
            <h2 class="uk-text-center uk-padding-large">
              Upload reviews
            </h2>
            <form>
              <div
                class="
                  uk-grid-small
                  uk-child-width-1-1
                  uk-grid
                  uk-grid-stack
                "
                uk-grid=""
              >
                <div class="uk-first-column">
                  <label
                    ><div
                      class="
                        uk-form-label
                        uk-form-label-required
                        uk-text-center
                      "
                    >
                      <h4><b>Header of review</b></h4>
                    </div>
                    <input
                      placeholder="Header"
                      class="uk-input"
                      type="text"
                      required=""
                      id="header"
                    />
                  </label>
                  <div
                    class="
                      uk-form-label
                      uk-form-label-required
                      uk-text-center
                    "
                  >
                    <h4><b>Review rate</b></h4>
                  </div>
                  <input
                      placeholder="Rate"
                      class="uk-input"
                      type="text"
                      required=""
                      id="rate"
                    />
                </div>
                  <div
                    class="
                      uk-form-label
                      uk-form-label-required
                      uk-text-center
                    "
                  >
                    <h4><b>Text of review</b></h4>
                  </div>
                  <textarea
                    class="uk-textarea"
                    rows="8"
                    placeholder="Textarea"
                    id="text"
                  ></textarea>
                </div>
                
                <div class="uk-text-center">
                  <button
                    type="button"
                    class="uk-button uk-button-default"
                    onclick="sendReview()"
                  >
                    Send
                  </button>
                </div>
              </div>
            </form>
          </section>
        </main>
      </div>
    </div>

    <script>
      const sendReview = async () => {
        try {
          const header = document.getElementById('header').value;
          const text = document.getElementById('text').value;
          const rate = document.getElementById('rate').value;
          if (!header || !text || !rate) {
            alert('some field is empty');
            return false;
          }
          const res = await axios({
            method: 'POST',
            url: '/api/v1/reviews/',
            data: {
              header,
              text,
              rate,
            },
          })
            .then((result) => {
              console.log(result);
              alert('success');
            })
            .catch((e) => alert('Bad values'));
          return false;
        } catch (err) {
          alert(err);
          return false;
        }
      };
    </script>
  </body>
</html>
